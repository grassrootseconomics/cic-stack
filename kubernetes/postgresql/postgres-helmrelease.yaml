apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: postgresql 
  namespace: grassroots 
spec:
  # The interval at which to reconcile the Helm release
  interval: 10m
  chart:
    spec:
      # The name of the chart as made available by the HelmRepository
      # (without any aliases)
      chart: postgresql
      # A fixed SemVer, or any SemVer range
      # (i.e. >=4.0.0 <5.0.0)
      version: 10.3.17 
      # The reference to the HelmRepository
      sourceRef:
        kind: HelmRepository
        name: bitnami 
        # Optional, defaults to the namespace of the HelmRelease
        namespace: default
  values:
    image:
      tag: 12.5.0 
    existingSecret: postgres-db-secrets
    postgresqlDatabase: postgres
    volumePermissions: # related to permissions error on file postgres/data when pod restart
      enabled: true
    initdbScriptsConfigMap: postgres-initdb-scipts
    initdbUser: postgres
    replication:
      readReplicas: 0
    metrics:
      enabled: true 
